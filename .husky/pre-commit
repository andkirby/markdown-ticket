#!/bin/sh
# Pre-commit hook: Security + quality checks
#
# Checks:
#   1. Block .env files (secrets)
#   2. Block Co-Authored-By (no AI attribution)
#   3. Block ../shared/ imports (enforce @mdt/shared alias)
#   4. Run knip on .ts files

set -e

# Source check functions
HOOK_DIR="$(dirname "$0")"
. "$HOOK_DIR/lib/block-env-files.sh"
. "$HOOK_DIR/lib/block-co-authored-by.sh"
. "$HOOK_DIR/lib/block-shared-imports.sh"
. "$HOOK_DIR/lib/run-knip.sh"

# Run checks
block_env_files
block_co_authored_by
block_shared_imports
run_knip

exit 0
