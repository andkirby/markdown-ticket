# Domain Constraints: MDT-095

**Context**: Project Management -> touches: Git Worktree Integration

## Aggregates

| Concept | Role | Contains | Grounded |
|---------|------|----------|----------|
| `Project` | Root | Config, Tickets, Worktrees | ✅ `Project` interface |
| `Ticket` | Internal | — | ✅ `Ticket` interface |
| `WorktreeMapping` | Value | — | (new) — no implementation yet |
| `WorktreeConfig` | Value | — | (new) — `worktree.enabled` setting |

## Invariants

| Rule | Scope | Enforce |
|------|-------|---------|
| Worktree path must contain ticket file to be used | `Project` | At boundary |
| Ticket can only be in one active worktree | `Project` | In aggregate |
| Worktree cache must refresh within TTL (30s) | `WorktreeMapping` | At boundary |
| When worktree disabled, always use main path | `Project` | At boundary |

## Language

| CR Term | Code Term | Status |
|---------|-----------|--------|
| Worktree | (new) | No implementation yet |
| Path Resolution | (new) | No implementation yet |
| Ticket | `Ticket` interface | ✅ Aligned |
| Project | `Project` interface | ✅ Aligned |
| ProjectService | `ProjectService` class | ✅ Aligned |
| FileWatcher | `FileWatcherService` class | ✅ Aligned |
| TicketCode | `Ticket.code: string` | ✅ Aligned |

## Cross-Context

| Operation | Contexts | Pattern |
|-----------|----------|---------|
| Detect worktrees | Project Management -> Git | Service |
| Resolve ticket path | Project Management -> File System | Service |
| Watch worktree changes | File Watching -> File System | Service |

---
*Generated by /mdt:domain-lens — constraints for /mdt:architecture*
