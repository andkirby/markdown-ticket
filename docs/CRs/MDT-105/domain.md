# Domain Constraints: MDT-105

**Context**: Infrastructure Caching → touches: Configuration Management, Project Discovery, File Operations

**Status**: Partially grounded (5 existing cache implementations to consolidate)

## Aggregates

| Concept | Role | Contains | Grounded |
|---------|------|----------|----------|
| `Cache` | Root | Entries | (new) — unified cache-manager wrapper |
| `CacheRegistry` | Root | All Cache instances | (new) — enables clearAll() |

**To consolidate**: `ProjectCacheService`, `ProjectDiscoveryService`, `TitleExtractionService`, `ExtractMetadataCommand`, `ReadFileCommand`

## Invariants

| Rule | Scope | Enforce |
|------|-------|---------|
| Cache entry expires after configured TTL | `Cache` | In aggregate |
| Cache size cannot exceed max entries | `Cache` | In aggregate |
| File modification invalidates cache entry | File operations | At boundary (file watcher) |
| Disabled cache returns undefined for all reads | `Cache` | In aggregate |
| Env var `MDT_CACHE_DISABLE=true` overrides all config | Configuration | At boundary |

## Language

| CR Term | Code Term | Status |
|---------|-----------|--------|
| "Shared cache module" | (new) | No unified module exists yet |
| `MCP_CACHE_TIMEOUT` → `MDT_CACHE_TIMEOUT` | Breaking change | ⚠️ Migration required |

## Cross-Context

| Operation | Contexts | Pattern |
|-----------|----------|---------|
| Clear all / invalidate on change | Config/File System → All Caches | Event (registry) |

---
*Generated by /mdt:domain-lens — constraints for /mdt:architecture*
