# Domain Constraints: MDT-077

**Context**: Project Management → touches: Configuration Storage, CLI Interface

## Aggregates

| Concept | Role | Contains | Grounded |
|---------|------|----------|----------|
| `Project` | Root | Config, Registry | ✅ `Project` interface |
| `LocalProjectConfig` | Internal | — | ✅ `LocalProjectConfig` interface |
| `ProjectValidator` | Value | — | ✅ `ProjectValidator` class |
| `ProjectService` | Application | Operations | ✅ `ProjectService` class |
| Configuration Strategy | Value | — | (new) - Three deployment modes |

## Invariants

| Rule | Scope | Enforce |
|------|-------|---------|
| Project code must be 2-5 uppercase letters (BR-2.1) | `Project` | In aggregate |
| Project identifier must equal directory name exactly (BR-2.2) | `Project` | At boundary |
| Project code must be unique across all projects (BR-2.1) | `Project` | At boundary |
| Project name must be non-empty string (BR-2.6) | `Project` | In aggregate |
| Project path must exist and be accessible (BR-2.7) | `Project` | At boundary |
| Tickets path automatically excluded from document discovery (BR-2.4) | `Project` | In aggregate |
| Only `LocalProjectConfig` - `ProjectConfig` deprecated (C2) | `Project` | In aggregate |
| Configuration writes must go through repository class (C4) | `Project` | At boundary |

## Language

| CR/Requirements Term | Code Term | Status |
|---------------------|-----------|--------|
| Project | `Project` interface | ✅ Aligned |
| Local Project Config | `LocalProjectConfig` interface | ✅ Aligned |
| Project Config (Legacy) | `ProjectConfig` interface | ⚠️ Deprecated - must delete (C2) |
| Project Validator | `ProjectValidator` class | ✅ Aligned |
| Project Service | `ProjectService` class | ✅ Aligned |
| Three-Strategy Configuration | (new) | No implementation yet |
| Global-Only Mode | (new) | Strategy 1 - complete definition in global registry |
| Project-First Mode | (new) | Strategy 2 (default) - minimal global, complete local |
| Auto-Discovery Mode | (new) | Strategy 3 - local config only, no global entry |
| ConfigurationRepository | (new) | Must create for all .toml writes (C4) |

## Cross-Context

| Operation | From | To | Pattern |
|-----------|------|----|---------|
| Create project via CLI | CLI Interface | Project Management | Service |
| Read project via Web UI | Web UI | Project Management | Service |
| Read project via MCP | MCP | Project Management | Service |
| Discover projects | Configuration Storage | Project Management | Event (file system watch) |
| Validate configuration | All interfaces | Project Management | Service (shared validation) |

---
*Generated by /mdt:domain-lens — constraints for /mdt:architecture*
