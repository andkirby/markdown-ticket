# Domain Constraints: MDT-077

**Context**: Project Management → touches: Configuration Storage, CLI Interface, Document Discovery

## Domain Visualization

```mermaid
graph TB
    subgraph "Project Management Context"
        Project[Project<br/>Aggregate Root]

        subgraph "Internal Entities"
            Config[ProjectConfig<br/>Internal Entity]
            Validator[ProjectValidator<br/>Value Object]
        end

        subgraph "Three Strategy Pattern"
            GlobalOnly[Global-Only Mode]
            ProjectFirst[Project-First Mode<br/>Default]
            AutoDiscovery[Auto-Discovery Mode]
        end

        subgraph "External Contexts"
            ConfigStorage[Configuration Storage]
            CLI[CLI Interface]
            DocDiscovery[Document Discovery]
        end
    end

    %% Primary relationships
    Project --> Config
    Project --> Validator
    Project --> GlobalOnly
    Project --> ProjectFirst
    Project --> AutoDiscovery

    %% Cross-context interactions
    Project -.-> ConfigStorage
    Project -.-> CLI
    Project -.-> DocDiscovery

    %% Styling
    classDef aggregate fill:#e1f5fe,stroke:#01579b,stroke-width:3px,color:#333
    classDef internal fill:#f3e5f5,stroke:#4a148c,color:#333
    classDef strategy fill:#e8f5e8,stroke:#1b5e20,color:#333
    classDef external fill:#fff3e0,stroke:#e65100,color:#333

    class Project aggregate
    class Config,Validator internal
    class GlobalOnly,ProjectFirst,AutoDiscovery strategy
    class ConfigStorage,CLI,DocDiscovery external
```

## Aggregates

| Concept | Role | Contains | Grounded |
|---------|------|----------|----------|
| `Project` | Root | Config, Registry, Documents | ✅ `Project` class |
| `ProjectConfig` | Internal | — | ✅ `ProjectConfig` interface |
| `ProjectValidator` | Value | — | ✅ `ProjectValidator` class |
| `Three-Strategy Config` | Value | — | (new) |

## Invariants

| Rule | Scope | Enforce |
|------|-------|---------|
| Project code must be 2-5 uppercase letters | `Project` | In aggregate |
| Project identifier must match directory name | `Project` | At boundary |
| Global registry path must exist and be accessible | `Project` | At boundary |
| Local config location defines project root | `ProjectConfig` | In aggregate |

## Language

| CR Term | Code Term | Status |
|---------|-----------|--------|
| Three-Strategy Configuration | (new) | No implementation yet |
| Project | `Project` class | ✅ Aligned |
| Project Manager | `ProjectManager` class | ✅ Aligned |
| Global Registry | Global registry storage | ✅ Aligned |
| Local Config | `ProjectConfig` interface | ✅ Aligned |
| Document Discovery | Document discovery service | ✅ Aligned |

---
*Generated by /mdt:domain-lens — constraints for /mdt:architecture*